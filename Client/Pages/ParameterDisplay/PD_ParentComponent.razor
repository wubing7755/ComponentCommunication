@page "/ParameterDisplay"

<label>Please input the count of players:@_promptInfo</label>

<input value="@_playerNumber" @onchange="NumChanged" 
       placeholder="Please input the count of players："
       type="number" />

<PD_ChildComponent ChildComponentPlayers="Players" />

@code {
    private List<Player> Players { get; set; } = new List<Player>();

    private int _playerNumber { get; set; } = 0;

    private string _promptInfo;
    
    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        
        _promptInfo = string.Empty;
        
        for (int i = 0; i < _playerNumber; i++)
        {
            Player player = new Player("Player_" + i);
            Players.Add(player);
        }
    }

    private void NumChanged(ChangeEventArgs e)
    {
        if (int.TryParse(e.Value?.ToString(), out int number))
        {
            _promptInfo = string.Empty;
            _playerNumber = number;
        }
        else
        {
            _promptInfo = "请输入一个有效的整数！";
        }
    }

}